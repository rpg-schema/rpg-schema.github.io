@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .

@prefix schema:  <https://schema.org/> .
@prefix foaf:    <http://xmlns.com/foaf/0.1/> .
@prefix skos:    <http://www.w3.org/2004/02/skos/core#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix org:     <http://www.w3.org/ns/org#> .

@prefix rpg:     <http://www.rpg-schema.org/1.0/> .

#################################################################
# Ontology header
#################################################################

rpg: a owl:Ontology ;
  rdfs:label "RPG Schema"@en ;
  dcterms:title "RPG Schema"@en ;
  dcterms:description """
RPG Schema is an OWL vocabulary (Turtle/TTL) for representing roleplaying games (TTRPGs, narrative RPGs, and adjacent systems)
in a ruleset-agnostic, queryable, tool-friendly, and LLM-friendly way.

The schema is designed to support:
- crunchy systems (D&D-like): abilities, skills, hit points, items, conditions, levels
- narrative systems (Blades-like): actions, stress, harm, position/effect, clocks, consequences, modifiers
- cross-system ‚Äúworld model‚Äù usage: shared actors, shared world entities, and consistent identifiers

Core modeling principles:

A) Definitions vs Instances (the most important rule)
- RuleSet-defined *definitions* are modeled as schema:DefinedTerm.
  Examples: ‚ÄúStrength‚Äù, ‚ÄúStress‚Äù, ‚ÄúSkirmish‚Äù, ‚ÄúPoisoned‚Äù, ‚ÄúLongsword‚Äù, ‚ÄúControlled‚Äù, ‚ÄúDesperate‚Äù.
- Runtime/per-actor/per-scene *instances* are separate nodes owned by an Actor (Character/Crew/etc.).
  Examples: ‚ÄúMarco‚Äôs Strength=16‚Äù, ‚ÄúCurrent Stress=3‚Äù, ‚ÄúPoisoned severity=1‚Äù, ‚ÄúThis clock is 2/6 filled‚Äù.

B) Value-node pattern (avoid predicate explosion)
- Do NOT invent custom predicates like :strengthValue or :hpValue.
- Use value nodes (CharacterAttributeValue, TrackerInstance, ItemInstance, AppliedState, ClockInstance).
  These value nodes point to a definition term (RuleSetAttribute / Tracker / Item / State / Clock)
  and store the actual numeric/textual value(s).

C) Cross-system shared state (canonical layer + mappings)
- If you want one ‚Äútrue‚Äù character state that multiple rulesets can view/modify, use CanonicalAttribute/CanonicalTracker.
- Each ruleset then declares AttributeMappings from its RuleSetAttribute terms to CanonicalAttribute terms.
- Tools/LLMs can use mappingExpression for transforms (identity/linear/bucket/etc.).

D) World/setting anchor (schema.org reuse)
- rpg:World is both schema:CreativeWork and schema:Place.
- Link anything to a World using rpg:inWorld so you can reuse schema.org properties for lore, places, events, etc.

Recommended LLM usage:
- Always provide schema:name + schema:description (or rdfs:label + rdfs:comment) for definitions.
- Use schema:termCode for stable short codes (STR, stress, skirmish, controlled, etc.).
- Prefer blank nodes for ephemeral instance nodes unless you need stable references across documents.
"""@en .

#################################################################
# Generic descriptive fields (schema.org / dcterms aligned)
#################################################################

rpg:name a owl:DatatypeProperty ;
  rdfs:label "name"@en ;
  rdfs:comment """
Convenience alias for schema:name (and rdfs:label). Prefer using schema:name in your data,
but rpg:name is provided for consistency in RPG-focused graphs.
"""@en ;
  rdfs:subPropertyOf rdfs:label, schema:name ;
  rdfs:range xsd:string .

rpg:description a owl:DatatypeProperty ;
  rdfs:label "description"@en ;
  rdfs:comment """
Convenience alias for schema:description / dcterms:description. Use for human-readable explanatory text.
For LLM-grounding, include short purpose statements and constraints here.
"""@en ;
  owl:equivalentProperty schema:description, dcterms:description ;
  rdfs:range xsd:string .

rpg:identifier a owl:DatatypeProperty ;
  rdfs:label "identifier"@en ;
  rdfs:comment """
Alias for schema:identifier. Use for stable IDs, UUIDs, external references, sheet IDs, etc.
"""@en ;
  owl:equivalentProperty schema:identifier ;
  rdfs:range rdfs:Literal .

rpg:termCode a owl:DatatypeProperty ;
  rdfs:label "term code"@en ;
  rdfs:comment """
Alias for schema:termCode. Use for short, stable identifiers for rule-defined terms.
Examples: STR, DEX, stress, skirmish, controlled, desperate, hp, ac.
"""@en ;
  owl:equivalentProperty schema:termCode ;
  rdfs:domain schema:DefinedTerm ;
  rdfs:range xsd:string .

#################################################################
# UI hint: icon/emoji
#################################################################

rpg:icon a owl:DatatypeProperty ;
  rdfs:label "icon"@en ;
  rdfs:comment """
A UI-friendly icon for a definition term, typically a single emoji (üó°Ô∏èüõ°Ô∏èüß™üíÄ‚ú®).
This is purely presentational: interfaces may use it to render compact lists or chips.
Not a gameplay mechanic.
"""@en ;
  rdfs:subPropertyOf schema:emoji ;
  rdfs:domain schema:DefinedTerm ;
  rdfs:range xsd:string .

#################################################################
# WORLD / SETTING (bridge to reuse schema.org)
#################################################################

rpg:World a owl:Class ;
  rdfs:label "World"@en ;
  rdfs:comment """
A world/setting/campaign universe. This is the anchor node for ‚Äúeverything belongs somewhere‚Äù.

Why both CreativeWork and Place?
- As schema:CreativeWork: attach lore metadata (author, license, dateCreated, genre, description, citations).
- As schema:Place: attach spatial semantics (containedInPlace, geo, and other place relationships).

Typical usage:
- Create one rpg:World per setting (Forgotten Realms, Doskvol, your homebrew).
- Link any entity (characters, crews, factions, scenes, clocks, items, even definitions) using rpg:inWorld.
"""@en ;
  rdfs:subClassOf schema:CreativeWork, schema:Place .

rpg:inWorld a owl:ObjectProperty ;
  rdfs:label "in world"@en ;
  rdfs:comment """
Associates any resource with the world/setting it belongs to.
Domain is owl:Thing on purpose: you can attach it to Characters, Scenes, Clocks, Organizations, Items, etc.
"""@en ;
  rdfs:domain owl:Thing ;
  rdfs:range  rpg:World .

rpg:worldUsesRuleSet a owl:ObjectProperty ;
  rdfs:label "world uses rule set"@en ;
  rdfs:comment """
Declares which rulesets are used in a world/campaign.
Optional: Actors can also declare their rulesets with rpg:usesRuleSet.
"""@en ;
  rdfs:domain rpg:World ;
  rdfs:range  rpg:RuleSet .

#################################################################
# TAGS (SKOS alignment)
#################################################################

rpg:Tag a owl:Class ;
  rdfs:label "Tag"@en ;
  rdfs:comment """
A descriptive tag/trait keyword aligned to SKOS.
Use tags for:
- item traits (ranged, heavy, arcane)
- capability traits (ritual, stealth, social)
- narrative traits (haunted, noble, outlaw)
For controlled vocabularies, provide skos:prefLabel and optionally a skos:ConceptScheme.
"""@en ;
  owl:equivalentClass skos:Concept ;
  rdfs:subClassOf schema:DefinedTerm .

rpg:hasTag a owl:ObjectProperty ;
  rdfs:label "has tag"@en ;
  rdfs:comment """
Attach one or more Tags to any resource. This is the schema‚Äôs ‚Äúuniversal annotation hook‚Äù.
Subproperty of schema:keywords to preserve compatibility with schema.org tooling.
"""@en ;
  rdfs:domain owl:Thing ;
  rdfs:range  rpg:Tag ;
  rdfs:subPropertyOf schema:keywords .

#################################################################
# ACTORS (FOAF + schema.org + ORG alignment)
#################################################################

rpg:Actor a owl:Class ;
  rdfs:label "Actor"@en ;
  rdfs:comment """
An entity that can act and hold state. This is the parent for Character, Crew, Faction/Organization.
In gameplay terms: something that can have attributes, items, conditions, trackers, relationships, and capabilities.
"""@en ;
  owl:equivalentClass foaf:Agent ;
  rdfs:subClassOf schema:Thing .

rpg:Character a owl:Class ;
  rdfs:label "Character"@en ;
  rdfs:comment """
A player character or NPC. Characters typically have:
- canonical and/or ruleset-specific attributes
- trackers/resources (HP, stress, XP, etc.)
- items (inventory/equipment)
- applied states/conditions
- capabilities (spells, actions, features)
"""@en ;
  rdfs:subClassOf rpg:Actor, schema:Person, foaf:Person .

rpg:Organization a owl:Class ;
  rdfs:label "Organization"@en ;
  rdfs:comment """
Any organized group that can act: guild, faction, kingdom, cult, corporation, adventuring party, crew.
Modeled as an Actor so it can hold state (reputation, heat, resources, clocks).
"""@en ;
  rdfs:subClassOf rpg:Actor, schema:Organization, foaf:Organization, org:Organization .

rpg:Crew a owl:Class ;
  rdfs:label "Crew"@en ;
  rdfs:comment """
A party/crew sheet treated as an Actor. Useful for Blades crews, D&D parties, squads, ship crews, etc.
Crews can have trackers (heat/rep), clocks, items/assets, relationships, and capabilities.
"""@en ;
  rdfs:subClassOf rpg:Organization, foaf:Group, org:OrganizationalUnit .

rpg:Faction a owl:Class ;
  rdfs:label "Faction"@en ;
  rdfs:comment """
A named organization in the setting. In many games factions interact via relationships, reputation, clocks, and territory.
Subclass of Organization to reuse the same state mechanisms.
"""@en ;
  rdfs:subClassOf rpg:Organization .

#################################################################
# RULESETS and rule-defined terms
#################################################################

rpg:RuleSet a owl:Class ;
  rdfs:label "Rule Set"@en ;
  rdfs:comment """
A game system or ruleset (D&D 5e, Blades in the Dark, Gumshoe, etc.).
Also a schema:DefinedTermSet: it is the container for its rule-defined terms (attributes, items, states, etc.).
"""@en ;
  rdfs:subClassOf schema:CreativeWork, schema:Game, schema:DefinedTermSet .

rpg:usesRuleSet a owl:ObjectProperty ;
  rdfs:label "uses rule set"@en ;
  rdfs:comment """
Declares that an Actor is being represented through one or more rulesets.
Multi-valued by design: one character can be viewed through multiple systems if you provide mappings.
"""@en ;
  rdfs:domain rpg:Actor ;
  rdfs:range  rpg:RuleSet .

rpg:RuleSetAttribute a owl:Class ;
  rdfs:label "Rule Set Attribute"@en ;
  rdfs:comment """
A ruleset-defined attribute concept (Strength, Dexterity, Armor Class, Stress, Skirmish, etc.).
This is the *definition*, not the character‚Äôs current value.
Link it to its RuleSet using schema:inDefinedTermSet (or rpg:definedInRuleSet).
"""@en ;
  rdfs:subClassOf schema:DefinedTerm .

rpg:definedInRuleSet a owl:ObjectProperty ;
  rdfs:label "defined in rule set"@en ;
  rdfs:comment """
Links a RuleSetAttribute definition to the RuleSet that defines it.
Subproperty of schema:inDefinedTermSet for compatibility.
"""@en ;
  rdfs:domain rpg:RuleSetAttribute ;
  rdfs:range  rpg:RuleSet ;
  rdfs:subPropertyOf schema:inDefinedTermSet .

rpg:RuleSetDiceRoll a owl:Class ;
  rdfs:label "Rule Set Dice Roll"@en ;
  rdfs:comment """
Legacy/compatibility class for earlier drafts. Prefer rpg:Roll for new data.
Use only if you already have data referencing this class.
"""@en ;
  rdfs:subClassOf schema:DefinedTerm .

#################################################################
# Ownership + value-carrying primitives
#################################################################

rpg:ownedBy a owl:ObjectProperty ;
  rdfs:label "owned by"@en ;
  rdfs:comment """
Generic ownership link used by instance nodes (attribute values, tracker instances, item instances, etc.).
Owner is typically an Actor (or specifically a Character for character-only value types).
"""@en ;
